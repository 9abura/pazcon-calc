<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>パズコン訓練コスト計算機</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    label, select, input { display: block; margin: 10px 0; }
  </style>
</head>
<body>
  <h1>訓練コスト計算機</h1>

  <label>兵種:
    <select id="type">
      <option>歩兵</option>
      <option>騎兵</option>
      <option>弓兵</option>
      <option>カタパルト</option>
    </select>
  </label>

  <label>Tレベル:
    <select id="tier">
      <script>
        for (let i = 1; i <= 11; i++) {
          document.write(`<option value="${i}">T${i}</option>`);
        }
      </script>
    </select>
  </label>

  <label>訓練人数:
    <input type="number" id="count" value="1000">
  </label>

  <label>リスカレベル:
    <select id="riska">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
    </select>
  </label>

  <label>
    <input type="checkbox" id="skill"> コストダウンスキル（-25%）ON
  </label>

  <label>コスト軽減率を直接入力（%）※優先される:
    <input type="number" id="override">
  </label>

  <button onclick="calc()">計算する</button>

  <h2>必要資源（軽減後）</h2>
  <div id="result"></div>

  <script>
    const baseCost = {
      歩兵: {
        1: [432, 0, 0, 0], 2: [490, 152, 0, 0], 3: [857, 173, 0, 0],
        4: [965, 303, 15, 0], 5: [1577, 360, 36, 0], 6: [1722, 598, 51, 0],
        7: [2736, 692, 94, 8], 8: [2952, 1145, 130, 15], 9: [4486, 1311, 238, 36],
        10: [4673, 2153, 310, 51], 11: [6645.6, 2347.2, 540, 100.8]
      },
      騎兵: {
        1: [382, 0, 0, 0], 2: [540, 123, 0, 0], 3: [749, 173, 0, 0],
        4: [1016, 252, 15, 0], 5: [1448, 360, 29, 0], 6: [1865, 497, 51, 0],
        7: [2506, 692, 87, 8], 8: [3104, 951, 137, 15], 9: [4112, 1311, 216, 29],
        10: [5141, 1793, 339, 58], 11: [5810.4, 2347.2, 475.2, 93.6]
      },
      弓兵: {
        1: [360, 0, 0, 0], 2: [490, 152, 0, 0], 3: [713, 209, 0, 0],
        4: [965, 332, 15, 0], 5: [1311, 432, 29, 0], 6: [1772, 598, 51, 0],
        7: [2276, 900, 80, 8], 8: [2952, 1239, 130, 15], 9: [3737, 1577, 202, 29],
        10: [4673, 2333, 310, 51], 11: [5536.8, 2548.8, 453.6, 86.4]
      },
      カタパルト: {
        1: [216, 0, 0, 0], 2: [396, 245, 0, 0], 3: [432, 346, 0, 0],
        4: [778, 504, 15, 0], 5: [792, 720, 22, 0], 6: [1419, 994, 36, 0],
        7: [1822, 1383, 65, 8], 8: [1772, 1901, 80, 8], 9: [2621, 2621, 159, 22],
        10: [2800.8, 3578.4, 187.2, 36], 11: [4428.0, 4701.6, 360.0, 72.0]
      }
    };

    const riskaTable = [3, 4.5, 6, 9, 12, 18.75, 24, 26, 28];

    function calc() {
      const type = document.getElementById("type").value;
      const tier = document.getElementById("tier").value;
      const count = Number(document.getElementById("count").value);
      const riska = Number(document.getElementById("riska").value);
      const skill = document.getElementById("skill").checked;
      const override = document.getElementById("override").value;

      let reduce = override ? Number(override) : riskaTable[riska] + (skill ? 25 : 0);
      reduce = Math.min(reduce, 95); // 安全のため上限
      const ratio = (100 - reduce) / 100;

      const base = baseCost[type][tier];
      const result = base.map(v => Math.round(v * ratio * count / 10));

      document.getElementById("result").innerHTML = `
        食料：${result[0]}<br>
        木材：${result[1]}<br>
        鉄　：${result[2]}<br>
        金　：${result[3]}
      `;
    }
  </script>
</body>
</html>
